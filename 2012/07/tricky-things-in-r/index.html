

  
    
  


  




  


  

<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hugo 0.36">
    <meta name="theme" content="Tranquilpeak 0.3.1-BETA">
    <title>tricky things in R</title>
    <meta name="author" content="Guangchuang Yu">
    <meta name="keywords" content="">

    <link rel="icon" href="https://guangchuangyu.github.io/cn/favicon.png">
    

    
    <meta name="description" content="

/  ____    _                                                     \
| |  _ \  (_)___    __ ___      _____  ___  ___  _ __ ___   ___  |
| | |_) | | / __|  / _` \ \ /\ / / _ \/ __|/ _ \| &#39;_ ` _ \ / _ \ |
| |  _ &lt;  | \__ \ | (_| |\ V  V /  __/\__ \ (_) | | | | | |  __/ |
| |_| \_\ |_|___/  \__,_| \_/\_/ \___||___/\___/|_| |_| |_|\___| |
\                                                                /
 ----------------------------------------------------------------
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||



èµ‹å€¼


ä»ä¸€å¼€å§‹å­¦Rå°±çŸ¥é“Rçš„èµ‹å€¼ç¬¦å·å’Œåˆ«çš„è¯­è¨€ä¸ä¸€æ ·ï¼Œç”¨çš„æ˜¯&lt;-ï¼Œè™½ç„¶=ä¹Ÿç”¨ï¼Œå¾ˆå¤šä¹¦ä¼šå‘Šè¯‰ä½ ä¸¤è€…æ˜¯ä¸€æ ·çš„ï¼Œå®Œå…¨é€šç”¨ï¼Œä¸è¿‡ç”¨Rçš„äººä¹ æƒ¯ä¹Ÿæ¨å€¡ç”¨&lt;-ã€‚æ‰€ä»¥æˆ‘åŸºæœ¬ä¸Šå°±æŠ›å¼ƒç”¨=å·äº†ï¼Œåæ­£åœ¨ESSé‡Œç”¨shift&#43;-å°±ä¼šè‡ªåŠ¨è¾“å…¥&lt;-ï¼Œä¹Ÿæ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚ç›´åˆ°æœ‰ä¸€å¤©ï¼Œæˆ‘å‘ç°åœ¨switché‡Œï¼Œå¿…é¡»ç”¨=å·ï¼Œè€Œä¸èƒ½ç”¨&lt;-ï¼Œæ‰å‘ç°å‘çˆ¹å•Šï¼Œè¿™ä¸¤ç¬¦å·æ˜¯ä¸ä¸€æ ·çš„ã€‚

">
    <meta property="og:description" content="

/  ____    _                                                     \
| |  _ \  (_)___    __ ___      _____  ___  ___  _ __ ___   ___  |
| | |_) | | / __|  / _` \ \ /\ / / _ \/ __|/ _ \| &#39;_ ` _ \ / _ \ |
| |  _ &lt;  | \__ \ | (_| |\ V  V /  __/\__ \ (_) | | | | | |  __/ |
| |_| \_\ |_|___/  \__,_| \_/\_/ \___||___/\___/|_| |_| |_|\___| |
\                                                                /
 ----------------------------------------------------------------
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||



èµ‹å€¼


ä»ä¸€å¼€å§‹å­¦Rå°±çŸ¥é“Rçš„èµ‹å€¼ç¬¦å·å’Œåˆ«çš„è¯­è¨€ä¸ä¸€æ ·ï¼Œç”¨çš„æ˜¯&lt;-ï¼Œè™½ç„¶=ä¹Ÿç”¨ï¼Œå¾ˆå¤šä¹¦ä¼šå‘Šè¯‰ä½ ä¸¤è€…æ˜¯ä¸€æ ·çš„ï¼Œå®Œå…¨é€šç”¨ï¼Œä¸è¿‡ç”¨Rçš„äººä¹ æƒ¯ä¹Ÿæ¨å€¡ç”¨&lt;-ã€‚æ‰€ä»¥æˆ‘åŸºæœ¬ä¸Šå°±æŠ›å¼ƒç”¨=å·äº†ï¼Œåæ­£åœ¨ESSé‡Œç”¨shift&#43;-å°±ä¼šè‡ªåŠ¨è¾“å…¥&lt;-ï¼Œä¹Ÿæ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚ç›´åˆ°æœ‰ä¸€å¤©ï¼Œæˆ‘å‘ç°åœ¨switché‡Œï¼Œå¿…é¡»ç”¨=å·ï¼Œè€Œä¸èƒ½ç”¨&lt;-ï¼Œæ‰å‘ç°å‘çˆ¹å•Šï¼Œè¿™ä¸¤ç¬¦å·æ˜¯ä¸ä¸€æ ·çš„ã€‚

">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="tricky things in R">
    <meta property="og:url" content="/2012/07/tricky-things-in-r/">
    <meta property="og:site_name" content="Guangchuang Yu">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="Guangchuang Yu">
    <meta name="twitter:description" content="

/  ____    _                                                     \
| |  _ \  (_)___    __ ___      _____  ___  ___  _ __ ___   ___  |
| | |_) | | / __|  / _` \ \ /\ / / _ \/ __|/ _ \| &#39;_ ` _ \ / _ \ |
| |  _ &lt;  | \__ \ | (_| |\ V  V /  __/\__ \ (_) | | | | | |  __/ |
| |_| \_\ |_|___/  \__,_| \_/\_/ \___||___/\___/|_| |_| |_|\___| |
\                                                                /
 ----------------------------------------------------------------
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||



èµ‹å€¼


ä»ä¸€å¼€å§‹å­¦Rå°±çŸ¥é“Rçš„èµ‹å€¼ç¬¦å·å’Œåˆ«çš„è¯­è¨€ä¸ä¸€æ ·ï¼Œç”¨çš„æ˜¯&lt;-ï¼Œè™½ç„¶=ä¹Ÿç”¨ï¼Œå¾ˆå¤šä¹¦ä¼šå‘Šè¯‰ä½ ä¸¤è€…æ˜¯ä¸€æ ·çš„ï¼Œå®Œå…¨é€šç”¨ï¼Œä¸è¿‡ç”¨Rçš„äººä¹ æƒ¯ä¹Ÿæ¨å€¡ç”¨&lt;-ã€‚æ‰€ä»¥æˆ‘åŸºæœ¬ä¸Šå°±æŠ›å¼ƒç”¨=å·äº†ï¼Œåæ­£åœ¨ESSé‡Œç”¨shift&#43;-å°±ä¼šè‡ªåŠ¨è¾“å…¥&lt;-ï¼Œä¹Ÿæ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚ç›´åˆ°æœ‰ä¸€å¤©ï¼Œæˆ‘å‘ç°åœ¨switché‡Œï¼Œå¿…é¡»ç”¨=å·ï¼Œè€Œä¸èƒ½ç”¨&lt;-ï¼Œæ‰å‘ç°å‘çˆ¹å•Šï¼Œè¿™ä¸¤ç¬¦å·æ˜¯ä¸ä¸€æ ·çš„ã€‚

">
    
      <meta name="twitter:creator" content="@guangchuangyu">
    
    

    
    

    
      <meta property="og:image" content="//www.gravatar.com/avatar/7466436733e8691a63a9f7af4651e014?s=640">
    

    
    
    

    

    
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.css" />
    
    
    <link rel="stylesheet" href="https://guangchuangyu.github.io/cn/css/style-u6mk0ojoywresbx8iepslrmmhl4stuhrsxuwhkpwrkrx7mryjcaimasnk4pi.min.css" />
    
    

    
      
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-77901140-1', 'auto');
ga('send', 'pageview');
</script>

    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://guangchuangyu.github.io/cn/">Guangchuang Yu</a>
  </div>
  
    
      <a class="header-right-picture "
         href="https://guangchuangyu.github.io/cn/#about">
    
    
    
      
        <img class="header-picture" src="//www.gravatar.com/avatar/7466436733e8691a63a9f7af4651e014?s=90" alt="Author&#39;s picture" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://guangchuangyu.github.io/cn/#about">
          <img class="sidebar-profile-picture" src="//www.gravatar.com/avatar/7466436733e8691a63a9f7af4651e014?s=110" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Guangchuang Yu</h4>
        
          <h5 class="sidebar-profile-bio">a senior-in-age-but-not-senior-in-knowledge bioinformatician</h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://guangchuangyu.github.io/cn/categories">
    
      <i class="sidebar-button-icon fa fa-lg fa-bookmark"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://guangchuangyu.github.io/cn/tags">
    
      <i class="sidebar-button-icon fa fa-lg fa-tags"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://guangchuangyu.github.io/cn/archives">
    
      <i class="sidebar-button-icon fa fa-lg fa-archive"></i>
      
      <span class="sidebar-button-desc">Archives</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://guangchuangyu.github.io/cn/#about">
    
      <i class="sidebar-button-icon fa fa-lg fa-question"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://guangchuangyu.github.io/cn/">
    
      <i class="sidebar-button-icon fa fa-lg fa-home"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/GuangchuangYu" target="_blank">
    
      <i class="sidebar-button-icon fa fa-lg fa-github"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://guangchuangyu.github.io/cn/index.xml">
    
      <i class="sidebar-button-icon fa fa-lg fa-rss"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>

    </ul>
  </div>
</nav>

      

      <div id="main" data-behavior="4"
        class="
               hasCoverMetaIn
               ">
        <article class="post" itemscope itemType="http://schema.org/BlogPosting">
          
          
            <div class="post-header main-content-wrap text-left">
  
    <h1 class="post-title" itemprop="headline">
      tricky things in R
    </h1>
  
  <div class="postShorten-meta post-meta">
  
    <time itemprop="datePublished" datetime="2012-07-10T07:16:22&#43;08:00">
      
  July 10, 2012

    </time>
  
  
  
  
    <span>in</span>
    
      <a class="category-link" href="https://guangchuangyu.github.io/cn/categories/r">R</a>
    
  


</div>

</div>
          
          <div class="post-content markdown" itemprop="articleBody">
            <div class="main-content-wrap">
              <hr />

<pre><code>/  ____    _                                                     \
| |  _ \  (_)___    __ ___      _____  ___  ___  _ __ ___   ___  |
| | |_) | | / __|  / _` \ \ /\ / / _ \/ __|/ _ \| '_ ` _ \ / _ \ |
| |  _ &lt;  | \__ \ | (_| |\ V  V /  __/\__ \ (_) | | | | | |  __/ |
| |_| \_\ |_|___/  \__,_| \_/\_/ \___||___/\___/|_| |_| |_|\___| |
\                                                                /
 ----------------------------------------------------------------
        \   ^__^
         \  (oo)\_______
            (__)\       )\/\
                ||----w |
                ||     ||
</code></pre>

<ol>
<li>èµ‹å€¼</li>
</ol>

<p>ä»ä¸€å¼€å§‹å­¦Rå°±çŸ¥é“Rçš„èµ‹å€¼ç¬¦å·å’Œåˆ«çš„è¯­è¨€ä¸ä¸€æ ·ï¼Œç”¨çš„æ˜¯<code>&lt;-</code>ï¼Œè™½ç„¶<code>=</code>ä¹Ÿç”¨ï¼Œå¾ˆå¤šä¹¦ä¼šå‘Šè¯‰ä½ ä¸¤è€…æ˜¯ä¸€æ ·çš„ï¼Œå®Œå…¨é€šç”¨ï¼Œä¸è¿‡ç”¨Rçš„äººä¹ æƒ¯ä¹Ÿæ¨å€¡ç”¨<code>&lt;-</code>ã€‚æ‰€ä»¥æˆ‘åŸºæœ¬ä¸Šå°±æŠ›å¼ƒç”¨<code>=</code>å·äº†ï¼Œåæ­£åœ¨ESSé‡Œç”¨shift+-å°±ä¼šè‡ªåŠ¨è¾“å…¥<code>&lt;-</code>ï¼Œä¹Ÿæ˜¯å¾ˆæ–¹ä¾¿çš„ã€‚ç›´åˆ°æœ‰ä¸€å¤©ï¼Œæˆ‘å‘ç°<a href="https://guangchuangyu.github.io/2009/03/assignment-token-of-r/">åœ¨switché‡Œï¼Œå¿…é¡»ç”¨<code>=</code>å·</a>ï¼Œè€Œä¸èƒ½ç”¨<code>&lt;-</code>ï¼Œæ‰å‘ç°å‘çˆ¹å•Šï¼Œè¿™ä¸¤ç¬¦å·æ˜¯ä¸ä¸€æ ·çš„ã€‚</p>

<p></p>

<ol>
<li>å‡½æ•°ä¸­ç»™å…¨å±€å˜é‡èµ‹å€¼</li>
</ol>

<p>Ré‡Œå¯ä»¥ç”¨<code>&lt;&lt;-</code>æ¥è¿›è¡Œå…¨å±€èµ‹å€¼ï¼Œæ¯”å¦‚æˆ‘åœ¨è§£Project Euler 15é¢˜æ—¶ï¼Œå°±ç”¨äº†<code>&lt;&lt;-</code>ï¼Œè¿™ä¸ªæœ€å¥½è¿˜æ˜¯ä¸è¦ç”¨ï¼Œç”¨å…¨å±€èµ‹å€¼å¯èƒ½ä¼šç»™ä½ surpriseï¼Œä¼šç»™å‡ºæƒŠå–œçš„ä»£ç ä¸æ˜¯å¥½ä»£ç ã€‚</p>

<!--more-->

<p>å½“ç„¶æ‰€è°“çš„å…¨å±€å’Œå±€éƒ¨ï¼Œéƒ½æ˜¯ç›¸å¯¹çš„ï¼Œä¸»è¦çœ‹å†…å­˜ç®¡ç†çš„å®ç°æ–¹å¼ï¼Œå†…å­˜å †æ ˆï¼Œåœ¨Ré‡Œé€šè¿‡environmentæ¥å®ç°ï¼ŒSä¸­ç§°ä¹‹ä¸ºframesã€‚æ‰€è°“çš„å…¨å±€å˜é‡å°±æ˜¯ä½äº.GlobalEnvä¸­è€Œå·²ã€‚</p>

<p>æ‰€ä»¥å¦‚æœè¦ç”¨<code>&lt;&lt;-</code>æ¥è¿›è¡Œå…¨å±€èµ‹å€¼çš„è¯ï¼Œå®‰å…¨çš„åšæ³•æ˜¯ä½¿ç”¨å±€éƒ¨çš„å…¨å±€å˜é‡ã€‚å¦‚æœè¦åšä¸ªç±»æ¯”çš„è¯ï¼Œè¿™æœ‰ç‚¹åƒC/C++é‡Œçš„é™æ€å˜é‡ã€‚</p>

<p>æ¯”å¦‚ä¸‹é¢è¿™æ®µè®¡ç®—fibonacciæ•°çš„å‡½æ•°ï¼š</p>

<pre><code class="language-r">fibonacci &lt;- local({
    memo &lt;- c(1, 1, rep(NA, 20))
    f &lt;- function(x) {
        if(x == 0) return(0)
        if(x &lt; 0) return(NA)
        if(x &gt; length(memo))
            stop(&quot;''x'' too big for implementation&quot;)
        if(!is.na(memo[x])) return(memo[x])
        ans &lt;- f(x-2) + f(x-1)
        memo[x] &lt;&lt;- ans
        ans
    }
})
</code></pre>

<pre><code>&gt; fibonacci(15)
[1] 610
&gt; get(&quot;memo&quot;, envir=environment(fibonacci))
 [1]   1   1   2   3   5   8  13  21  34  55  89 144 233 377 610
[16]  NA  NA  NA  NA  NA  NA  NA
</code></pre>

<p>environmentæ˜¯ä¸ªå¥½ä¸œè¥¿ï¼Œæˆ‘å¾ˆæƒŠè®¶äºæˆ‘çœ‹è¿‡çš„ä¹¦é‡ŒåŸºæœ¬éƒ½æ²¡è®²åˆ°ã€‚Rçš„é¢å‘å¯¹è±¡ç³»ç»ŸR5ï¼Œå°±ç›®å‰æ¥çœ‹ï¼Œæ˜¯çº¯Rå®ç°çš„ï¼Œç”¨çš„å°±æ˜¯S4å’Œenvironmentã€‚</p>

<p>PS:S3é¢å‘å¯¹è±¡å°±æ˜¯åŠ ä¸ªclasså±æ€§ï¼Œé€šå¸¸ç”¨listæ¥å­˜å‚¨æ•°æ®ã€‚æˆ‘ä¸€ç›´è§‰å¾—ï¼ŒæŠŠæ•°æ®å­˜åœ¨å°é—­çš„environmenté‡Œï¼Œå†åŠ ä¸ªclasså±æ€§ï¼ŒåŸºæœ¬ä¸Šå°±å¯ä»¥å½“æˆæ˜¯ä¸ªç®€æ˜“ç‰ˆçš„S4äº†ï¼Œå½“ç„¶S4æ€ä¹ˆå®ç°ï¼Œæˆ‘å¹¶ä¸æ¸…æ¥šã€‚</p>

<ol>
<li>ç²¾åº¦</li>
</ol>

<p>ç²¾åº¦çš„é—®é¢˜ï¼Œè¿™æ˜¯æ‰€æœ‰è®¡ç®—æœºè¯­è¨€çš„é—®é¢˜ï¼Œå°±åƒ<a href="http://www.ituring.com.cn/article/details/2058">å›¾çµç¤¾åŒºé‡Œçš„ç¬‘è¯</a>ï¼Œ0.1 + 0.2 &gt; 0.3 ç­”æ¡ˆæ˜¯TRUE.</p>

<pre><code>&gt; .1 == .3/3
[1] FALSE
&gt; print(.3/3, digits=16)
[1] 0.09999999999999999
&gt; as.integer(.3/3)
[1] 0
</code></pre>

<ol>
<li>æ“ä½œç¬¦ä¼˜å…ˆåº¦</li>
</ol>

<p>è¿™ä¸ªä¹Ÿæ˜¯æ‰€æœ‰è¯­è¨€æ‰€å…±æœ‰çš„é—®é¢˜ï¼ŒåŠ ï¼ˆï¼‰æ‰æ˜¯ä¸‡èƒ½çš„ã€‚è¿™ä¸ªä¹‹æ‰€ä»¥trickyï¼Œæ˜¯å› ä¸ºæœ‰äº›ä¼˜å…ˆåº¦å’Œæˆ‘ä»¬çš„ç›´è§‰ä¸ç¬¦åˆï¼Œå¦‚æœä¸æ³¨æ„ï¼Œå°±å¾ˆæœ‰å¯èƒ½å‡ºé”™ã€‚</p>

<p>æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š</p>

<pre><code>&gt; -1.2^2.3
[1] -1.52
&gt; (-1.2)^2.3
[1] NaN
&gt; as.complex(-1.2)^2.3
[1] 0.89+1.23i
</code></pre>

<p>åœ¨Ré‡Œï¼Œå¯ä»¥ç”¨<code>?Syntax</code>é€šè¿‡åœ¨çº¿æ–‡æ¡£æŸ¥çœ‹æ“ä½œç¬¦çš„ä¼˜å…ˆåº¦ã€‚</p>

<ol>
<li>ç±»å±æ€§</li>
</ol>

<p>åœ¨Ré‡Œï¼Œæ‰€æœ‰çš„ä¸œè¥¿ï¼Œéƒ½æ˜¯å¯¹è±¡ï¼Œéƒ½æœ‰ç±»å±æ€§ã€‚æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼Œæˆ‘æƒ³çœ‹xå’Œyæ˜¯å¦æ˜¯ä¸€æ ·çš„ã€‚</p>

<pre><code>&gt; x &lt;- 1:2
&gt; y &lt;- c(1,2)
&gt; all(x == y)
[1] TRUE
</code></pre>

<p>æ˜¾ç„¶å®ƒä»¬åº”è¯¥æ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯å¦‚æœç”¨identicalå‡½æ•°æ¥çœ‹ï¼Œç­”æ¡ˆå´æ˜¯FALSEã€‚åŸå› æ˜¯xæ˜¯æ•´æ•°å‹æ•°æ®ï¼Œè€Œyæ˜¯æµ®ç‚¹å‹æ•°æ®ï¼Œæ‰€ä»¥å®ƒä»¬ä¸ä¸€æ ·ã€‚è¿™ä¹ˆtrickyçš„äº‹æƒ…ï¼ŒåŸå› åœ¨äºå‡½æ•°cä¼šæŠŠæ•°å­—éƒ½å­˜æˆæµ®ç‚¹å‹ã€‚</p>

<pre><code>&gt; print(y, digits=10)
[1] 1 2
</code></pre>

<p>å…¶å®yå°±æ˜¯æ•´æ•°ï¼Œè¢«è®¤ä¸ºæ˜¯æµ®ç‚¹æ•°ï¼Œå®Œå…¨æ˜¯å› ä¸ºç±»å±æ€§ã€‚</p>

<ol>
<li>ç¼ºå¤±å€¼</li>
</ol>

<p>æ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼Œæˆ‘æƒ³å–xä¸­çš„2ï¼Œå› ä¸ºxå«æœ‰NAï¼Œå°±å‡ºé—®é¢˜äº†ã€‚å½“ç„¶è¿™ä¸ªè¿˜æ˜¯æ¯”è¾ƒå¥½è§£å†³çš„ï¼Œç”¨whichå°±å¯ä»¥äº†ã€‚</p>

<pre><code>&gt; x &lt;- c(1:4,NA, 2)
&gt; x
[1]  1  2  3  4 NA  2
&gt; x[x==2]
[1]  2 NA  2
&gt; x[which(x==2)]
[1] 2 2
</code></pre>

<p>è¿™ä¸ªä¸ç®—trickyï¼Œä½†æ˜¯å¦‚æœæˆ‘æƒ³æŠŠxä¸­å¤§äº5çš„æ•°å‰”é™¤æ‰ï¼Œä¸Šé¢è¿™ä¸ªxæ²¡æœ‰æ•°å­—æ˜¯å¤§äº5çš„ï¼Œæˆ‘ä»¬æœŸæœ›å®ƒè¿”å›xè‡ªèº«ã€‚</p>

<pre><code>&gt; x[-which(x&gt;5)]
numeric(0)
</code></pre>

<p>ç»“æœå´æ˜¯è¿”å›ç©ºå‘é‡ã€‚å› ä¸ºwhich(x&gt;5)æ˜¯ç©ºçš„ï¼Œåšä¸ºindexå»å–xçš„subsetï¼Œè‡ªç„¶ä¹Ÿå°±å–ä¸åˆ°ã€‚</p>

<p>å¯¹äºå„ç§membershipçš„å¤„ç†ï¼Œä¸‡èƒ½åˆå®‰å…¨çš„è¿˜æ˜¯<code>%in%</code>æ“ä½œç¬¦ã€‚</p>

<pre><code>&gt; x[! x %in% 5]
[1]  1  2  3  4 NA  2
</code></pre>

<ol>
<li>ç©ºå‘é‡</li>
</ol>

<p>ä¸Šé¢ä¾‹å­å‡ºç°ç©ºå‘é‡numeric(0),ç©ºå‘é‡å¦‚æœå‡ºç°äºè®¡ç®—ä¸­ï¼Œä¹Ÿæ˜¯å¾ˆweirdçš„ã€‚</p>

<pre><code>&gt; sum(numeric(0))
[1] 0
&gt; prod(numeric(0))
[1] 1
&gt; any(logical(0))
[1] FALSE
&gt; all(logical(0))
[1] TRUE
</code></pre>

<ol>
<li>æ“ä½œç¬¦æ˜¯å‡½æ•°</li>
</ol>

<pre><code>&gt; &quot;+&quot;(1,2)
[1] 3
&gt; &quot;==&quot;(1,2)
[1] FALSE
&gt; &quot;&lt;&quot;(1,2)
[1] TRUE
</code></pre>

<ol>
<li>çº¯æ•°å­—çš„data.frame</li>
</ol>

<p>å¦‚æœä¸€ä¸ªdata.frameçš„å†…å®¹å…¨æ˜¯æ•°å­—ï¼Œå®ƒçœ‹èµ·æ¥å’Œmatrixé•¿å¾—ä¸€æ¨¡ä¸€æ ·ï¼Œä½†æ˜¯å®ƒä»¬çš„å®ç°æ–¹å¼æ˜¯ä¸ä¸€æ ·çš„ï¼Œmatrixæ˜¯dimention=2çš„arrayï¼Œè€Œdata.frameæ˜¯ç­‰é•¿çš„listã€‚</p>

<p>é•¿å¾—åƒæœ‰æ—¶å€™ä¸æ³¨æ„ï¼Œå°±ä¼šå‡ºç°confuseï¼Œæ¯”å¦‚ä½ è¦æ±‚ä¸€ä¸ªmatrixçš„å‡å€¼ï¼Œå¾ˆå®¹æ˜“ï¼Œç”¨meanå‡½æ•°å°±è¡Œã€‚ä½†å¦‚æœä½ ç”¨meanå»æ±‚ä¸€ä¸ªdata.frameçš„å‡å€¼ï¼Œå°±ä¸workäº†ï¼Œç»™å‡ºçš„ç»“æœæ˜¯æ¯ä¸ªcolumnçš„å‡å€¼æ‰€ç»„æˆçš„å‘é‡ï¼Œå½“ç„¶ä½ å¯ä»¥å¯¹è¿™ä¸ªcolumn meanå†æ±‚ä¸€æ¬¡meanå°±è¡Œäº†ï¼Œä¹Ÿå¯ä»¥å…ˆas.matrixæˆ–unlistå¤„ç†ä¸€ä¸‹ï¼Œå†æ±‚meanã€‚</p>

<p>å„ç§å‡½æ•°ï¼ŒåŒ…æ‹¬applyç³»åˆ—ï¼Œå¯¹äºdata.frameå’Œmatrixçš„è¡Œä¸ºï¼Œå¾ˆå¤šéƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼Œéœ€è¦è°¨æ…ã€‚</p>

<ol>
<li>å“ˆå¸Œè¡¨</li>
</ol>

<p>Rçš„æ•°æ®ç±»å‹ä¸­æ²¡æœ‰å“ˆå¸Œè¡¨ï¼Œé€šå¸¸æˆ‘ä»¬å¯ä»¥ç”¨named vectoræˆ–è€…listæ¥å®ç°ï¼Œå¯ä»¥é€šè¿‡nameæ¥å–å¾—æ‰€å¯¹åº”çš„å€¼ã€‚ä½†è¿™å¹¶ä¸æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„å“ˆå¸Œï¼ŒåŒæ ·æˆ‘ä»¬å¯ä»¥ç”¨environmentæ¥å®ç°ã€‚</p>

<pre><code>&gt; ee &lt;- new.env()
&gt; assign(&quot;a&quot;, 10, ee)
&gt; assign(&quot;b&quot;, 22, ee)
&gt; get(&quot;a&quot;, ee)
[1] 10
&gt; keys &lt;- ls(ee)
&gt; keys
[1] &quot;a&quot; &quot;b&quot;
&gt; values &lt;- sapply(keys, get, envir=ee)
&gt; values
 a  b 
10 22 
</code></pre>

<ol>
<li>ç”¨æ•°å­—å½“å˜é‡å</li>
</ol>

<p>å‡ ä¹æ‰€æœ‰çš„ç¼–ç¨‹è¯­è¨€éƒ½ä¸å…è®¸ä»¥_å¼€å¤´æˆ–è€…æ•°å­—å½“å˜é‡åï¼Œä½†åœ¨Ré‡Œï¼Œè¿™å´æ˜¯å¯èƒ½çš„ï¼Œè¯·<a href="http://ygc.name/2009/11/23/using-number-as-variable/">çŒ›å‡»æ­¤å¤„</a>ã€‚</p>

<p>è¿™ä¹ˆtrickyçš„äº‹æƒ…ï¼Œä¹Ÿæ˜¯é€šè¿‡environmentæ¥å®ç°çš„ã€‚</p>

<ol>
<li>éƒ¨åˆ†åŒ¹é…</li>
</ol>

<p>æ­£å¦‚ç¬¬ä¸€ç‚¹æåˆ°çš„<code>&lt;-</code>å’Œ=æ˜¯é€šç”¨çš„ï¼Œå–listå…ƒç´ æ˜¯<code>$</code>å’Œ<code>[[</code>ä¹Ÿæ˜¯é€šç”¨çš„ï¼Œç„¶è€Œå®ƒä»¬çš„é»˜è®¤è¡Œä¸ºä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ï¼Œ<code>$</code>é»˜è®¤æ”¯æŒéƒ¨åˆ†åŒ¹é…ï¼Œè€Œ<code>[[</code>åˆ™ä¸æ˜¯ã€‚</p>

<pre><code>&gt; ll &lt;- list(aa=1:2, ab=2:4, cc=1:3) 
&gt; ll$c
[1] 1 2 3
&gt; ll[[&quot;c&quot;]]
NULL
&gt; ll[[&quot;c&quot;, exact=FALSE]]
[1] 1 2 3
</code></pre>

<p>éƒ¨åˆ†åŒ¹é…ä¸æ˜¯å¥½ä¸œè¥¿ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä¾‹å­ï¼š</p>

<pre><code>&gt; ll$c
[1] 1 2 3
&gt; ll$c &lt;- 5:6
&gt; ll$c
[1] 5 6
&gt; ll
$aa
[1] 1 2
$ab
[1] 2 3 4
$cc
[1] 1 2 3
$c
[1] 5 6
</code></pre>

<p>å¦‚æœä½ ä¹ æƒ¯ç”¨éƒ¨åˆ†åŒ¹é…å»å–å…ƒç´ ï¼Œåœ¨å¯¹æ­¤å…ƒç´ è¿›è¡Œé‡æ–°èµ‹å€¼çš„æ—¶å€™ï¼Œå°±å¾ˆå¯èƒ½ä¼šçŠ¯é”™ã€‚</p>

<p>å‡½æ•°å‚æ•°ä¹Ÿæ”¯æŒéƒ¨åˆ†åŒ¹é…ï¼Œæ¯”å¦‚æœ‰ä¸ªå‚æ•°trimï¼Œè€Œä½ ä¸€ç›´ç”¨tå»ä¼ è¿™ä¸ªå‚æ•°ï¼Œå¦‚æœä»¥åå‡½æ•°åŠ äº†å‚æ•°æ¯”å¦‚treatï¼Œé‚£ä¹ˆä½ åŸå…ˆçš„ä»£ç å°±ä¼šè«åå…¶å¦™çš„ä¸å¹²æ´»äº†ã€‚</p>

<ol>
<li>factor</li>
</ol>

<pre><code>&gt; x &lt;- factor(8:12)
&gt; as.numeric(x)
[1] 1 2 3 4 5
&gt; as.numeric(as.character(x))
[1]  8  9 10 11 12
&gt; as.numeric(levels(x))
[1]  8  9 10 11 12
</code></pre>

<p>factorç”±äºå†…éƒ¨æ˜¯ä½¿ç”¨è‡ªç„¶æ•°å»å­˜å‚¨çš„ï¼Œæ‰€ä»¥å¦‚æœæƒ³æŠŠfactorè½¬æ¢æˆæ•°å­—ï¼Œå°±å¿…é¡»è¦éº»çƒ¦ç‚¹ã€‚</p>

<p>è¿™ä¸ªé—®é¢˜å‡ºç°äºdata.frameä¸­ï¼Œå°±æ˜¯ä¸ªå¦äººupsetçš„ç©æ„äº†ã€‚</p>

<pre><code>&gt; df &lt;- data.frame(a=1:2, b=c(&quot;x&quot;,&quot;y&quot;))
&gt; df[1,]
  a b
1 1 x
&gt; as.character(df[1,])
[1] &quot;1&quot; &quot;1&quot;
&gt; as.character(df)
[1] &quot;1:2&quot; &quot;1:2&quot;
</code></pre>

<p>è§£å†³çš„åŠæ³•æ˜¯ï¼Œä½ å…ˆæŠŠdfè½¬æ¢æˆmatrixã€‚</p>

<ol>
<li>ä¸å­˜åœ¨çš„subscript</li>
</ol>

<p>æ¥ç€ä½¿ç”¨ä¸Šé¢çš„dfã€‚</p>

<pre><code>&gt; rownames(df) &lt;- c(&quot;a&quot;, &quot;b&quot;)
&gt; colnames(df) &lt;- c(&quot;p&quot;, &quot;q&quot;)
&gt; df[c(&quot;a&quot;, &quot;e&quot;),]
    p    q
a   1    x
NA NA &lt;NA&gt;
&gt; df[,c(&quot;p&quot;, &quot;e&quot;)]
Error in `[.data.frame`(df, , c(&quot;p&quot;, &quot;e&quot;)) : undefined columns selected
</code></pre>

<p>rowå’Œcolumnçš„è¡Œä¸ºæ˜¯ä¸ä¸€è‡´çš„ï¼Œè€Œå¯¹äºä¸åŒçš„æ•°æ®ç±»å‹ï¼Œå…¶è¿”å›å€¼ä¹Ÿä¼šä¸åŒã€‚</p>

<p>vectorä¼šè¿”å›NA,liståˆ™æ˜¯NULL,matrixä¼šæŠ¥é”™ï¼Œsubscript out of boudsã€‚</p>

<ol>
<li>ä»å‰ªè´´æ¿é‡Œè¯»æ•°æ®</li>
</ol>

<p>åœ¨windowså’Œlinuxä¸‹ï¼Œéƒ½å¯ä»¥ç”¨<code>read.table(&quot;paste&quot;)</code>æ¥è¯»å–å‰ªè´´æ¿é‡Œçš„æ•°æ®ï¼Œåœ¨Mac OS Xä¸‹ï¼Œå°±ä¸è¡Œäº†ã€‚ä½ å¿…é¡»è¦ç”¨<code>read.table(pipe(&quot;pbpaste&quot;))</code>ï¼Œè€Œåœ¨Linuxä¸‹ï¼Œåˆ™æ˜¯ç”¨<code>read.table(&quot;clipboard&quot;)</code>ï¼Œæˆ‘å…¶å®å¾ˆçº³é—·ï¼Œä¸ºä»€ä¹ˆå°±ä¸èƒ½åŒ…è£…ä¸€ä¸‹ï¼Œè®©è¯­æ³•ç»Ÿä¸€ã€‚</p>

<p>æœ€åï¼Œé™„é€ä¸€ä¸ªtipsï¼Œä»æˆ‘<a href="https://guangchuangyu.github.io/cn/2007/06/screenshot/">ä»¥å‰çš„æˆªå±</a>ä¸Šçœ‹ï¼Œæˆ‘æœ€å–œæ¬¢å¹²çš„äº‹ï¼Œå°±æ˜¯ä¸€æ‰“å¼€ç»ˆç«¯ï¼Œè‡ªåŠ¨è¿è¡Œä¸€æ¬¡fortuneï¼Œé¡ºé“çœ‹çœ‹åè¨€å˜›-,-</p>

<p>åœ¨Ré‡Œï¼Œæœ‰ä¸ª<a href="http://cran.r-project.org/web/packages/fortunes/index.html">fortunes</a>åŒ…ï¼Œæ”¶é›†çš„æ˜¯Rç›¸å…³çš„è¨€è®ºï¼Œæœ‰äº‹æ²¡äº‹çœ‹ä¸€çœ‹ï¼Œæœ‰ç›Šèº«å¿ƒå¥åº·å•Šï¼</p>

<pre><code>&gt; require(fortunes)
Loading required package: fortunes
&gt; fortune()

[Listing original copyright holders in R packages is] especially useful if
there are areas of doubt and uncertainty (eg code published on ftp sites before
people worried about licenses), since it at least gives you rigidly defined
areas of doubt and uncertainty.[5]
[5] Adams D, (1978) Hitchhiker's Guide. BBC Radio.
   -- Thomas Lumley (in a discussion about copyright vs. licenses)
      R-devel (January 2010)
</code></pre>
              
            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://guangchuangyu.github.io/cn//tags/syntax/">syntax</a>

  <a class="tag tag--primary tag--small" href="https://guangchuangyu.github.io/cn//tags/semantic/">semantic</a>

                  </div>
                
              
            
            <div class="post-actions-wrap">
  <nav>
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://guangchuangyu.github.io/cn/2012/09/%E5%A6%82%E4%BD%95%E8%8E%B7%E5%8F%96%E6%96%87%E7%8C%AE/" data-tooltip="å¦‚ä½•è·å–æ–‡çŒ®">
          
            <i class="fa fa-angle-left"></i>
            <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
          </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://guangchuangyu.github.io/cn/2012/05/%E4%BB%80%E4%B9%88%E6%98%AFt-%E6%A3%80%E9%AA%8C/" data-tooltip="ä»€ä¹ˆæ˜¯T æ£€éªŒ">
          
            <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
            <i class="fa fa-angle-right"></i>
          </a>
        </li>
      
    </ul>
  </nav>
  <ul class="post-actions post-action-share">
    
      <li class="post-action hide-lg hide-md hide-sm">
        <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
          <i class="fa fa-share-alt"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https%3a%2f%2fguangchuangyu.github.io%2fcn%2f2012%2f07%2ftricky-things-in-r%2f">
          <i class="fa fa-google-plus"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fguangchuangyu.github.io%2fcn%2f2012%2f07%2ftricky-things-in-r%2f">
          <i class="fa fa-facebook-official"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https%3a%2f%2fguangchuangyu.github.io%2fcn%2f2012%2f07%2ftricky-things-in-r%2f">
          <i class="fa fa-twitter"></i>
        </a>
      </li>
    
    
      <li class="post-action">
        <a class="post-action-btn btn btn--default" href="#disqus_thread">
          <i class="fa fa-comment-o"></i>
        </a>
      </li>
    
    <li class="post-action">
      
        <a class="post-action-btn btn btn--default" href="#">
      
        <i class="fa fa-list"></i>
      </a>
    </li>
  </ul>
</div>


            
              
                <div id="disqus_thread">
  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  <div style="width:350px;margin:auto;">
<script type="text/javascript" src="//rf.revolvermaps.com/0/0/7.js?i=5qpvv5zz7fp&amp;m=0&amp;c=ff0000&amp;cr1=ffffff&amp;sx=0" async="async"></script>
</div>


              
            
          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2018 Guangchuang Yu. All Rights Reserved
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        <div class="post-actions-wrap">
  <nav>
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://guangchuangyu.github.io/cn/2012/09/%E5%A6%82%E4%BD%95%E8%8E%B7%E5%8F%96%E6%96%87%E7%8C%AE/" data-tooltip="å¦‚ä½•è·å–æ–‡çŒ®">
          
            <i class="fa fa-angle-left"></i>
            <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
          </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://guangchuangyu.github.io/cn/2012/05/%E4%BB%80%E4%B9%88%E6%98%AFt-%E6%A3%80%E9%AA%8C/" data-tooltip="ä»€ä¹ˆæ˜¯T æ£€éªŒ">
          
            <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
            <i class="fa fa-angle-right"></i>
          </a>
        </li>
      
    </ul>
  </nav>
  <ul class="post-actions post-action-share">
    
      <li class="post-action hide-lg hide-md hide-sm">
        <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions">
          <i class="fa fa-share-alt"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://plus.google.com/share?url=https%3a%2f%2fguangchuangyu.github.io%2fcn%2f2012%2f07%2ftricky-things-in-r%2f">
          <i class="fa fa-google-plus"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fguangchuangyu.github.io%2fcn%2f2012%2f07%2ftricky-things-in-r%2f">
          <i class="fa fa-facebook-official"></i>
        </a>
      </li>
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https%3a%2f%2fguangchuangyu.github.io%2fcn%2f2012%2f07%2ftricky-things-in-r%2f">
          <i class="fa fa-twitter"></i>
        </a>
      </li>
    
    
      <li class="post-action">
        <a class="post-action-btn btn btn--default" href="#disqus_thread">
          <i class="fa fa-comment-o"></i>
        </a>
      </li>
    
    <li class="post-action">
      
        <a class="post-action-btn btn btn--default" href="#">
      
        <i class="fa fa-list"></i>
      </a>
    </li>
  </ul>
</div>


      </div>
      <div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <ul class="share-options">
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://plus.google.com/share?url=https%3a%2f%2fguangchuangyu.github.io%2fcn%2f2012%2f07%2ftricky-things-in-r%2f">
        <i class="fa fa-google-plus"></i><span>Share on Google Plus</span>
      </a>
    </li>
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fguangchuangyu.github.io%2fcn%2f2012%2f07%2ftricky-things-in-r%2f">
        <i class="fa fa-facebook-official"></i><span>Share on Facebook</span>
      </a>
    </li>
    <li class="share-option">
      <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https%3a%2f%2fguangchuangyu.github.io%2fcn%2f2012%2f07%2ftricky-things-in-r%2f">
        <i class="fa fa-twitter"></i><span>Share on Twitter</span>
      </a>
    </li>
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>
    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-remove"></i>
    </div>
    
      <img id="about-card-picture" src="//www.gravatar.com/avatar/7466436733e8691a63a9f7af4651e014?s=110" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Guangchuang Yu</h4>
    
      <div id="about-card-bio">a senior-in-age-but-not-senior-in-knowledge bioinformatician</div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Postdoc researcher
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker"></i>
        <br/>
        Hong Kong
      </div>
    
  </div>
</div>

    <div id="algolia-search-modal" class="modal-container">
  <div class="modal">
    <div class="modal-header">
      <span class="close-button"><i class="fa fa-close"></i></span>
      <a href="https://algolia.com" target="_blank" class="searchby-algolia text-color-light link-unstyled">
        <span class="searchby-algolia-text text-color-light text-small">by</span>
        <img class="searchby-algolia-logo" src="https://www.algolia.com/static_assets/images/press/downloads/algolia-light.svg">
      </a>
      <i class="search-icon fa fa-search"></i>
      <form id="algolia-search-form">
        <input type="text" id="algolia-search-input" name="search"
          class="form-control input--large search-input" placeholder="Search" />
      </form>
    </div>
    <div class="modal-body">
      <div class="no-result text-color-light text-center">no post found</div>
      <div class="results">
        
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://guangchuangyu.github.io/cn/2018/02/changing-branch-length-of-outgroup/">
                <h3 class="media-heading">æ”¹å˜outgroupçš„æé•¿</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Feb 2, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><blockquote>
<p>Hello all,</p>

<p>When I plot some data using ggtree, the out groups are on a very long branch length. The out groups are 75 and 76 in the example below.</p>

<p>I would like to keep the out groups in the tree but ignore their branch lengths to make presentation easier.</p>
</blockquote>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://guangchuangyu.github.io/cn/2018/02/reactome-icon/">
                <h3 class="media-heading">ç§’æ€ä¸€åˆ‡æ‰‹å·¥ç”»é€šè·¯çš„ç´ æ</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Feb 2, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p><img src="http://guangchuangyu.github.io/blog_images/2018/reactome-icon/path.gif" alt="" /></p>

<p>åƒè¿™æ ·çš„é€šè·¯å›¾ï¼ŒåŸºæœ¬ä¸Šéƒ½æ˜¯æ‰‹å·¥ç”»çš„ï¼Œä¹Ÿæœ‰å‡ ä¸ªè½¯ä»¶å¯ä»¥åšè¿™äº‹ï¼Œä½†éƒ½ä¸æµè¡Œï¼Œæ¯•ç«Ÿä¹Ÿæ²¡å•¥ï¼Œæ— éæ˜¯ç´ æï¼Œæ‰€ä»¥å¤šåŠè¿˜æ˜¯ç´ æ+ç†Ÿæ‚‰çš„è½¯ä»¶ï¼Œæ¯”å¦‚æœ‰illustratorã€fireworksä»¥åŠæœ€å—æ¬¢è¿çš„powerpointã€‚åƒillustratorå¾ˆå¤šäººå·²ç»å¾ˆç†Ÿï¼Œæˆ–è€…powerpointç»å¯¹å¤Ÿå‚»ç“œæ“ä½œï¼Œæˆ‘ä»¬éœ€è¦çš„åªæ˜¯ç´ æï¼Œè‡ªåˆ¶ç´ æä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œä½†è´¹æ—¶ä¸”æœ‰æ—¶å€™è¿˜ä¸å¤Ÿå¥½çœ‹ã€‚å¾ˆå¤šäººè¿˜åœ¨è´¹åŠ›æ”¶é›†ç½‘ä¸Šå¯ä»¥ä¸‹è½½åˆ°çš„å„ç§ç´ æï¼Œå¾ˆå¤šç´ æè¦†ç›–é¢ä¸å¤Ÿå¹¿ï¼Œè€Œä¸åŒæ¥æºçš„ç´ ææ··æ­æœ‰æ—¶å€™ä¼šæœ‰ç§ç”»é£ä¸å¯¹çš„æ„Ÿè§‰ã€‚</p>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://guangchuangyu.github.io/cn/2018/02/broken-heart/">
                <h3 class="media-heading">ä¸€åƒä¸ªä¼¤å¿ƒçš„ç†ç”±</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Feb 2, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>çœ¼çœ‹ç€2æœˆ14å·å°±è¦åˆ°æ¥äº†ï¼Œåˆæ˜¯ä¸€å¹´ä¸€åº¦çš„ç”»çº¢å¿ƒè£…13çš„æ—¶å€™ï¼Œè¿™ç§äº‹æƒ…å·²ç»è¢«æˆ‘BSäº†ï¼Œè¯·çŒ›å‡»ï¼šã€Š<a href="http://mp.weixin.qq.com/s/Y8IHd6X4f49irXvD_M7bNw">ç”»â¤ï¸è£…geekä»€ä¹ˆçš„ï¼Œéƒ½å¼±çˆ†äº†ï¼ğŸ˜œ</a>ã€‹ã€‚çº¢å¿ƒå·²ç»æ²¡ä»€ä¹ˆå¥½ç”»çš„äº†ï¼Œç‰¹åˆ«æ˜¯åœ¨æˆ‘ç”»äº†ç”Ÿæ—¥è›‹ç³•ï¼Œå¹¶ç”¨è›‹ç³•ç”»çº¢å¿ƒä¹‹åï¼Œã€Š<a href="https://mp.weixin.qq.com/s/Iqcqo5YTy1qmXdsuIrlrYQ">130å²äº†ï¼Œç¥ä½ ç”Ÿå¿«</a>ã€‹ï¼Œæ˜¯é©´å­æ˜¯é©¬ï¼Œéƒ½æ²¡æ³•æ™’è‚Œè‚‰äº†ã€‚å½“ç„¶çº¢å¿ƒè¿˜æ˜¯ä¼šæœ‰æ‰€è°“çš„ç†å·¥å®…ç”·æ™’ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜ä¼šæœ‰å„ç§èŠ±æ‹›ï¼Œæ¥ç»™å•èº«ç‹—æ’’ç‹—ç²®ã€‚æƒ³è¦åŠ å…¥æ’’ç‹—ç²®å¤§å†›çš„ï¼Œå¿«ç‚¹çœ‹ã€Š<a href="http://mp.weixin.qq.com/s/2j9VRgar5ExSma6B7Yc3dw">å¦‚ä½•å‘Šåˆ«å•èº«</a>ã€‹ã€‚</p>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://guangchuangyu.github.io/cn/2018/02/job-wanted/">
                <h3 class="media-heading">Yå”è¦æ±‚èŒ</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Feb 2, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>ä½™å…‰åˆ›
é¦™æ¸¯å¤§å­¦ ç”Ÿç‰©ä¿¡æ¯å­¦ åšå£«ï¼Œç›®å‰åœ¨æ¸¯å¤§ä»äº‹åšå£«åå·¥ä½œ
æ±‚èŒæ„å‘ï¼šå‰¯æ•™æˆä»¥ä¸Š
åœ°ç‚¹ï¼šä¸»è¦æ„å‘æ˜¯å¹¿å·å’Œæ·±åœ³</p>

<p>ç®€å†ï¼š<a href="https://guangchuangyu.github.io/resume/YGC.pdf">https://guangchuangyu.github.io/resume/YGC.pdf</a></p>

<p>google scholaræŒ‡æ ‡ï¼š</p>

<ul>
<li>å¼•ç”¨ï¼š1330</li>
<li>h-index: 14</li>
<li>i10-index: 17</li>
</ul>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://guangchuangyu.github.io/cn/2018/02/wechat-addition/">
                <h3 class="media-heading">ç½‘ç˜¾ä½ å¥½ï¼Œæˆ‘æ˜¯80åï¼Œè¯·å†²æˆ‘æ¥</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Feb 2, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p><img src="https://guangchuangyu.github.io/blog_images/2018/wechat_additive/images.png" alt="" /></p>

<p>ç«¥é‹ä»¬ï¼Œæ•²é»‘æ¿åˆ’é‡ç‚¹å•¦ï¼Œä¸Šå›¾è¯·å¯¹å·å…¥åï¼Œæ²¡é”™ï¼Œè¯´çš„å°±æ˜¯ä½ ï¼è¿™ä¸ªç½‘ç˜¾çš„éªšå¹´ï¼</p>

<p>Scientific Reportæœ€è¿‘å‘è¡¨äº†<a href="https://www.nature.com/articles/s41598-018-19904-y">ä¸€ç¯‡ç¥æ–‡</a>:</p>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://guangchuangyu.github.io/cn/2018/01/scihub-bookmark/">
                <h3 class="media-heading">å…³äºscihubï¼Œä¸€æ–‡å°±å¤Ÿäº†</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jan 1, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>Sci-Hubæ˜¯å±…å®¶æ—…è¡Œå­¦æœ¯å¿…å¤‡çš„ç¥å™¨ï¼Œæ¯•ç«Ÿç©·äººæ¯”è¾ƒå¤šï¼Œè€Œå‡ºç‰ˆç¤¾å¤ªé»‘å¿ƒã€‚ä½†Sci-Hubæœ‰ä¸€ä¸ªé—®é¢˜æ˜¯é•œåƒç«™ç»å¸¸æŒ‚ï¼Œæˆ‘ä¹‹å‰ç»™å‡ºäº†ä¸€ä¸ªæ¯”è¾ƒå¯èƒ½ä¸ä¼šæŒ‚çš„é“¾æ¥ï¼Œã€Š<a href="https://mp.weixin.qq.com/s/5JGC1bcVZOmdaPxo_uXYYw">å†ä¸ç”¨æ‹…å¿ƒæ‰“ä¸å¼€sci-hubäº†</a>ã€‹ï¼Œé‚£å°±æ˜¯æ´‹è‘±é“¾æ¥ã€‚å½“ç„¶æ´‹è‘±é“¾æ¥æ¯”è¾ƒæ…¢ï¼Œæˆ‘ä»¬è¿˜æ˜¯æ›´å€¾å‘äºä½¿ç”¨æ™®é€šçš„é“¾æ¥ï¼Œæ‰€ä»¥æˆ‘åˆæ”¶é›†äº†ã€Š<a href="https://mp.weixin.qq.com/s/RK1CYEboiEDzapdHsiwEGg">2018æœ€æ–°å¯ç”¨çš„sci-hubé•œåƒ+æ¡Œé¢ç‰ˆç¨‹åº</a>ã€‹ï¼Œå½“ç„¶è¿™äº›é“¾æ¥éšç€æ—¶é—´çš„æ¨ç§»ï¼Œæœ‰äº›å¯èƒ½ä¹Ÿä¼šæŒ‚ã€‚</p>

<p>ä»»ä½•æ—¶å€™ï¼Œæˆ‘ä»¬éƒ½åº”è¯¥æœ‰å¤šæ‰‹å‡†å¤‡ï¼Œæ‰€ä»¥æˆ‘ä¸€ç›´éƒ½æœ‰å¤‡é€‰æ–¹æ¡ˆï¼Œè™½ç„¶ä¸å¦‚sci-hubï¼Œè™½ç„¶ç°åœ¨sci-hubè¿˜èƒ½ç”¨çš„æƒ…å†µä¸‹é¦–å…ˆè¿˜æ˜¯sci-hubï¼Œä½†æ”¶è—ä¸€ä¸¤ä¸ªå¤‡é€‰å·¥å…·æ˜¯å¿…è¦çš„ï¼Œå®ƒè®©ä½ åœ¨é¢å‰å˜åŒ–çš„æ—¶å€™å¯ä»¥æ·¡å®šã€‚ã€Š<a href="http://mp.weixin.qq.com/s/aaIby87LSQgxpvCAECFxkw">sci-hubå¦‚æœæŒ‚äº†ï¼Œä½ è¿˜æœ‰ç¥å™¨ä¸‹æ–‡çŒ®å—ï¼Ÿ</a>ã€‹è¿™ç¯‡æ–‡ç« ä»‹ç»çš„ç¥å™¨å³ä½¿ä½ ç°åœ¨ä¸ç”¨ï¼Œä¹Ÿè¯¥æ”¶è—ç€ã€‚</p>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://guangchuangyu.github.io/cn/2018/01/frog-tree/">
                <h3 class="media-heading">Yå”ä¸æƒ³å…»è›™ï¼Œåªæƒ³å…»ä½ ï¼</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jan 1, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>è¯è¯´æœ‰ä¸€åªè›™ï¼Œå®ƒæ—…æ¸¸å»äº†å¹¿ä¸œï¼Œæ¸¸æˆç»“æŸã€‚</p>

<p>è¿™ç¯‡æ–‡ç« ï¼Œåªæƒ³è·Ÿå¤§å®¶è®²ä¸€è®²ggtreeï¼Œä½ å€¼å¾—æ‹¥æœ‰çš„å¼ºå¤§çš„è¿›åŒ–æ ‘å¯è§†åŒ–è½¯ä»¶ï¼Œé«˜é¢œå€¼çš„å›¾ï¼Œå°±åœ¨äºæŒ‡å°–å‡ è¡Œä»£ç ä¸­ã€‚</p>

<p>æœ€è¿‘å…»è›™å¾ˆæµè¡Œï¼Œå°±ä»¥è›™ä¸ºä¾‹ï¼Œè¯»æ ‘ç”¨<code>read.tree</code>ï¼Œç„¶åä¸€ä¸ª<code>ggtree</code>çš„æŒ‡ä»¤ï¼Œæ ‘å°±ç”»å‡ºæ¥äº†ã€‚è€Œä½ è§è¯ç¥å¥‡çš„æ—¶åˆ»å°±åœ¨äºä½ ä¸æ–­<code>+geom_xxx</code>åŠ å›¾å±‚ï¼Œè¿™é‡Œæˆ‘ç”¨äº†<code>geom_tiplab</code>æ¥åŠ taxa labelï¼Œè€Œè¿™ä¸ªå¯ä¸ä»…ä»…æ˜¯åå­—å“¦ï¼Œç”¨emojiä¹Ÿå¯ä»¥ï¼Œè¿™é‡Œæˆ‘ç”¨çš„ç«Ÿç„¶æ˜¯<strong>å›¾ç‰‡</strong>ï¼Œä½ æ²¡çœ‹é”™ï¼Œä¹Ÿå¯ä»¥ã€‚åªè¦æŒ‡å®š<code>geom=&quot;image&quot;</code>å°±OKï¼Œé‚£ä¸ªæœ¬æ¥è¦æ‰“çš„æ–‡æœ¬ï¼Œå°±ä¼šè¢«å½“æˆæ˜¯æ–‡ä»¶åï¼Œç„¶åè¯»å›¾ç‰‡ç”»å›¾ç‰‡ï¼Œä¸€åˆ‡å°½åœ¨æˆ‘çš„ggimageåŒ…ã€‚</p>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://guangchuangyu.github.io/cn/2018/01/scihub-osx/">
                <h3 class="media-heading">è‹¹æœç‰ˆSciHubæ¡Œé¢è½¯ä»¶</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jan 1, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>ä¸ºäº†æ–¹ä¾¿è‹¹æœç”¨æˆ·ä¹Ÿèƒ½ç”¨æ¡Œé¢è½¯ä»¶ä¸‹æ–‡çŒ®ï¼Œæˆ‘æŠŠSciHubæ¡Œé¢ç‰ˆæ‰“åŒ…æˆå¯ä»¥è¿è¡Œåœ¨è‹¹æœä¸Šçš„Appã€‚</p>

<p>SciHubæ¡Œé¢ç‰ˆæ˜¯Windowsç¨‹åºï¼Œä¸»é¡µä¸º<a href="https://zhuanlan.zhihu.com/p/31809890">https://zhuanlan.zhihu.com/p/31809890</a>ã€‚</p>

<p>é¦–å…ˆè¿™æ˜¯åˆ©ç”¨wineæŠ€æœ¯å®ç°çš„ï¼Œåœ¨è‹¹æœä¸Šä½ éœ€è¦å®‰è£…<strong>XQuartz</strong>: <a href="https://www.xquartz.org/">https://www.xquartz.org/</a>ã€‚</p>

<p>å®‰è£…å¾ˆå®¹æ˜“ï¼Œæˆ‘å·²ç»æ‰“åŒ…äº†dmgæ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶æœ‰44Mï¼Œè¿˜æŒºå¤§çš„ï¼Œæ²¡æ³•ï¼Œè¦æ‰“åŒ…ä¸€ä¸ªwindowsçš„è¿è¡Œç¯å¢ƒå˜›ã€‚</p>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://guangchuangyu.github.io/cn/2018/01/pubmed-still-update/">
                <h3 class="media-heading">PubMedæ²¡æœ‰åœæ›´</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jan 1, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>åœ¨ä¸€ç¯‡æ–‡ç« ã€Š<a href="http://mp.weixin.qq.com/s/VfLmahpFqdmXfwId-d_BWQ">pubmedåœæ›´ï¼Ÿå’Œä½ æ²¡åŠæ¯›é’±å…³ç³»ï¼ä½ ä»¬æ˜¯æƒ³æ”¾å‡æƒ³ç–¯äº†å§ï¼Ÿ</a>ã€‹æˆ‘å°±è§£è¯»äº†æ‰€è°“çš„åœæ›´ï¼Œæ ¹æœ¬ä¸ç¢äº‹ï¼Œç„¶ååˆåˆ†æäº†äº‹æƒ…åªæ˜¯è¢«è‡ªåª’ä½“æ‹¿æ¥åšçœ¼çƒè€Œå·²ï¼ŒçœŸæ­£å—å½±å“çš„NCBIæ•°æ®åº“æ²¡äººè¯´ï¼Œè€ŒPubMedåœæ›´çš„å¯èƒ½æ€§ä¸å¤§ã€‚</p>

<blockquote>
<p>Because of a lapse in government funding, the information on this website may not be up to date, transactions submitted via the website may not be processed, and the agency may not be able to respond to inquiries until appropriations are enacted.</p>
</blockquote>

<p>è¿™ä¸ªæ¶ˆæ¯ï¼Œå¾ˆå¤šäººä¸Špubmedçœ‹åˆ°ï¼Œå°±æ‰“é¸¡è¡€äº†ï¼Œå“Ÿå“Ÿå“Ÿï¼Œå·å¤–å·å¤–å¤§æ–°é—»ï¼ŒçœŸçš„æœ‰è¿‡è¿‡è„‘å­å—ï¼Ÿ</p>

<blockquote>
<p>transactions submitted via the website may not be processed</p>
</blockquote>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
          <div class="media">
            
            <div class="media-body">
              <a class="link-unstyled" href="https://guangchuangyu.github.io/cn/2018/01/ggplot2-seed/">
                <h3 class="media-heading">ggplot2çš„ä¸€ä¸ªå‘</h3>
              </a>
              <span class="media-meta">
                <span class="media-date text-small">
                  Jan 1, 2018
                </span>
              </span>
              <div class="media-content hide-xs font-merryweather"><p>ä»Šå¤©ä»¥ggplot2çš„ä¸€ä¸ªå‘æ¥è¯´ä¸€ä¸‹ï¼Œå‘æ— å¤„ä¸åœ¨ï¼Œé˜²ä¸èƒœé˜²ï¼Œä½ å¤§å¯ä»¥è¯•ä¸€ä¸‹ä¸‹é¢çš„ä»£ç ï¼š</p>

<pre><code>&gt; set.seed(123)
&gt; require(ggplot2)
Loading required package: ggplot2
&gt; rnorm(3)
[1]  0.8005543  1.1902066 -1.6895557
&gt; set.seed(123)
&gt; rnorm(3)
[1] -0.5604756 -0.2301775  1.5587083
</code></pre>

<p>åœ¨ä¸¤æ¬¡set.seedå’Œrnormä¹‹é—´ï¼Œç¬¬ä¸€æ¬¡å› ä¸ºåŠ è½½äº†ggplot2ï¼Œç»“æœå°±ä¸ä¸€æ ·äº†ï¼è¿™å¿…é¡»æ˜¯ç¬¬äºŒæ¬¡æ˜¯æ­£ç¡®ç­”æ¡ˆï¼Œä¹Ÿå°±æ˜¯è¯´åŠ è½½ggplot2æŠŠä½ çš„seedç»™åƒäº†ï¼åŠ è½½åŒ…ä¼šæ”¹å˜Rç¯å¢ƒï¼Ÿè¿™ç»å¯¹ä¸æ˜¯å¥½ä¸»æ„ï¼Œæˆ‘ä»¬æ¥è¯•è¯•åŠ è½½åˆ«çš„åŒ…è¯•è¯•ï¼Œæ¯”å¦‚æˆ‘çš„clusterProfiler:</p>

<p></p></div>
            </div>
            <div style="clear:both;"></div>
            <hr>
          </div>
        
      </div>
    </div>
    <div class="modal-footer">
      <p class="results-count text-medium"
         data-message-zero="no post found"
         data-message-one="1 post found"
         data-message-other="{n} posts found">
         197 posts found
      </p>
    </div>
  </div>
</div>
    
  
    
    <div id="cover" style="background-image:url('https://guangchuangyu.github.io/cn/images/cover.jpg');"></div>
  


    
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/jquery.fancybox.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.4/helpers/jquery.fancybox-thumbs.min.js"></script>


<script src="https://guangchuangyu.github.io/cn/js/script-wl33z0n6ocaypepiqrazthtivfrliqijej4rq8ek8gvrv1awftmgjuv8k4zc.min.js"></script>

<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight').each(function(i, block) {
    var code = "";
    hljs.highlightAuto(block.innerText).value.split(/\r\n|\r|\n/).forEach(function(line) {
      code += "<span class=\"line\">" + line + "</span><br>";
    });
    if (code.length > 0) {
      block.innerHTML = code;  
    }
  });
  $('pre > code').each(function(i, block) {
    $(this).addClass('codeblock');
    hljs.highlightBlock(block);
  });
});
</script>

  
    
      <script>
        var disqus_config = function () {
          this.page.url = 'https:\/\/guangchuangyu.github.io\/cn\/2012\/07\/tricky-things-in-r\/';
          
            this.page.identifier = '\/2012\/07\/tricky-things-in-r\/'
          
        };
        (function() {
          
          
          if (window.location.hostname == "localhost") {
            return;
          }
          var d = document, s = d.createElement('script');
          var disqus_shortname = 'gcyu';
          s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    
  





    
  </body>
</html>

